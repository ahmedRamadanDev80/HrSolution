<div class="container mt-4">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2> Department Lists </h2>
        <button class="btn btn-success" [routerLink]="['/departments/new']">
            <i class="bi bi-plus-lg"></i> Add Department
        </button>
    </div>
    

<table class="table table-striped table-bordered align-middle">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let d of departments() | slice:(page()-1)*pageSize():page()*pageSize(); let i = index">
            <td>{{ (page()-1)*pageSize() + i + 1 }}</td>
            <td>{{ d.name }}</td>
            <td>
                <button class="btn btn-sm btn-outline-primary me-2" [routerLink]="['/departments/edit', d.id]">Edit</button>

                <button class="btn btn-sm btn-outline-danger" (click)="deleteDepartment(d.id)">Delete</button>
            </td>
        </tr>
    </tbody>
</table>

<!-- Pagination -->
<div class="d-flex justify-content-between align-items-center mt-3 flex-wrap gap-2">
    <div class="d-flex gap-1">
        <button class="btn btn-outline-primary" [disabled]="page() === 1" (click)="pageChanged(page()-1)">Prev</button>
        <button class="btn btn-outline-primary" *ngFor="let p of pages()" [class.active]="p === page()"
            (click)="pageChanged(p)">
            {{ p }}
        </button>
        <button class="btn btn-outline-primary" [disabled]="page() === totalPages()"
            (click)="pageChanged(page()+1)">Next</button>
    </div>

    <div class="d-flex align-items-center gap-2">
        <label>Page Size:</label>
        <select class="form-select" style="width: 100px;" [value]="pageSize()"
            (change)="pageSizeChanged($any($event.target).value)">
            <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
        </select>
    </div>

    <div>Total: {{ total() }}</div>
</div>
</div>